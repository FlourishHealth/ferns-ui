{"ast":null,"code":"import React, { createContext, useContext, useEffect, useReducer, useState } from 'react';\nimport { actionSheetEventManager } from \"./eventmanager\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var providerRegistryStack = [];\nexport var sheetsRegistry = {\n  global: {}\n};\nexport function registerSheet(id, Sheet) {\n  var contexts = [];\n  for (var _i = 2; _i < arguments.length; _i++) {\n    contexts[_i - 2] = arguments[_i];\n  }\n  if (!id || !Sheet) return;\n  if (!contexts || contexts.length === 0) contexts = ['global'];\n  for (var _a = 0, contexts_1 = contexts; _a < contexts_1.length; _a++) {\n    var context = contexts_1[_a];\n    var registry = !sheetsRegistry[context] ? sheetsRegistry[context] = {} : sheetsRegistry[context];\n    registry[id] = Sheet;\n    actionSheetEventManager.publish(\"\".concat(context, \"-on-register\"));\n  }\n}\nexport function SheetProvider(_a) {\n  var _b = _a.context,\n    context = _b === void 0 ? 'global' : _b,\n    children = _a.children;\n  var _c = useReducer(function (x) {\n      return x + 1;\n    }, 0),\n    forceUpdate = _c[1];\n  var sheetIds = Object.keys(sheetsRegistry[context] || sheetsRegistry['global'] || {});\n  var onRegister = React.useCallback(function () {\n    forceUpdate();\n  }, [forceUpdate]);\n  useEffect(function () {\n    providerRegistryStack.indexOf(context) > -1 ? providerRegistryStack.indexOf(context) : providerRegistryStack.push(context) - 1;\n    var unsub = actionSheetEventManager.subscribe(\"\".concat(context, \"-on-register\"), onRegister);\n    return function () {\n      providerRegistryStack.splice(providerRegistryStack.indexOf(context), 1);\n      unsub === null || unsub === void 0 ? void 0 : unsub.unsubscribe();\n    };\n  }, [context, onRegister]);\n  var renderSheet = function renderSheet(sheetId) {\n    return _jsx(RenderSheet, {\n      id: sheetId,\n      context: context\n    }, sheetId);\n  };\n  return _jsxs(_Fragment, {\n    children: [children, sheetIds.map(renderSheet)]\n  });\n}\nvar ProviderContext = createContext('global');\nvar SheetIDContext = createContext(undefined);\nexport var useProviderContext = function useProviderContext() {\n  return useContext(ProviderContext);\n};\nexport var useSheetIDContext = function useSheetIDContext() {\n  return useContext(SheetIDContext);\n};\nvar RenderSheet = function RenderSheet(_a) {\n  var _b, _c;\n  var id = _a.id,\n    context = _a.context;\n  var _d = useState(),\n    payload = _d[0],\n    setPayload = _d[1];\n  var _e = useState(false),\n    visible = _e[0],\n    setVisible = _e[1];\n  var Sheet = context.startsWith('$$-auto-') ? (_b = sheetsRegistry === null || sheetsRegistry === void 0 ? void 0 : sheetsRegistry.global) === null || _b === void 0 ? void 0 : _b[id] : sheetsRegistry[context] ? (_c = sheetsRegistry[context]) === null || _c === void 0 ? void 0 : _c[id] : undefined;\n  var onShow = React.useCallback(function (data, ctx) {\n    if (ctx === void 0) {\n      ctx = 'global';\n    }\n    if (ctx !== context) return;\n    setPayload(data);\n    setVisible(true);\n  }, [context]);\n  var onClose = React.useCallback(function (_data, ctx) {\n    if (ctx === void 0) {\n      ctx = 'global';\n    }\n    if (context !== ctx) return;\n    setVisible(false);\n    setTimeout(function () {\n      setPayload(undefined);\n    }, 1);\n  }, [context]);\n  var onHide = React.useCallback(function (data, ctx) {\n    if (ctx === void 0) {\n      ctx = 'global';\n    }\n    actionSheetEventManager.publish(\"hide_\".concat(id), data, ctx);\n  }, [id]);\n  useEffect(function () {\n    if (visible) {\n      actionSheetEventManager.publish(\"show_\".concat(id), payload, context);\n    }\n  }, [context, id, payload, visible]);\n  useEffect(function () {\n    var subs = [actionSheetEventManager.subscribe(\"show_wrap_\".concat(id), onShow), actionSheetEventManager.subscribe(\"onclose_\".concat(id), onClose), actionSheetEventManager.subscribe(\"hide_wrap_\".concat(id), onHide)];\n    return function () {\n      subs.forEach(function (s) {\n        return s.unsubscribe();\n      });\n    };\n  }, [id, context, onShow, onHide, onClose]);\n  if (!Sheet) return null;\n  return !visible ? null : _jsx(ProviderContext.Provider, {\n    value: context,\n    children: _jsx(SheetIDContext.Provider, {\n      value: id,\n      children: _jsx(Sheet, {\n        sheetId: id,\n        payload: payload\n      })\n    })\n  });\n};","map":{"version":3,"names":["React","createContext","useContext","useEffect","useReducer","useState","actionSheetEventManager","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","providerRegistryStack","sheetsRegistry","global","registerSheet","id","Sheet","contexts","_i","arguments","length","_a","contexts_1","context","registry","publish","concat","SheetProvider","_b","children","_c","x","forceUpdate","sheetIds","Object","keys","onRegister","useCallback","indexOf","push","unsub","subscribe","splice","unsubscribe","renderSheet","sheetId","RenderSheet","map","ProviderContext","SheetIDContext","undefined","useProviderContext","useSheetIDContext","_d","payload","setPayload","_e","visible","setVisible","startsWith","onShow","data","ctx","onClose","_data","setTimeout","onHide","subs","forEach","s","Provider","value"],"sources":["/Users/josh/src/ui/node_modules/react-native-actions-sheet/dist/src/provider.js"],"sourcesContent":["/* eslint-disable curly */\nimport React, { createContext, useContext, useEffect, useReducer, useState, } from 'react';\nimport { actionSheetEventManager } from './eventmanager';\nexport var providerRegistryStack = [];\n/**\n * An object that holds all the sheet components against their ids.\n */\nexport var sheetsRegistry = {\n    global: {}\n};\n// Registers your Sheet with the SheetProvider.\nexport function registerSheet(id, Sheet) {\n    var contexts = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        contexts[_i - 2] = arguments[_i];\n    }\n    if (!id || !Sheet)\n        return;\n    if (!contexts || contexts.length === 0)\n        contexts = ['global'];\n    for (var _a = 0, contexts_1 = contexts; _a < contexts_1.length; _a++) {\n        var context = contexts_1[_a];\n        var registry = !sheetsRegistry[context]\n            ? (sheetsRegistry[context] = {})\n            : sheetsRegistry[context];\n        registry[id] = Sheet;\n        actionSheetEventManager.publish(\"\".concat(context, \"-on-register\"));\n    }\n}\n/**\n * The SheetProvider makes available the sheets in a given context. The default context is\n * `global`. However if you want to render a Sheet within another sheet or if you want to render\n * Sheets in a modal. You can use a seperate Provider with a custom context value.\n *\n * For example\n```ts\n// Define your SheetProvider in the component/modal where\n// you want to show some Sheets.\n<SheetProvider context=\"local-context\" />\n\n// Then register your sheet when for example the\n// Modal component renders.\n\nregisterSheet('local-sheet', LocalSheet,'local-context');\n\n```\n * @returns\n */\nexport function SheetProvider(_a) {\n    var _b = _a.context, context = _b === void 0 ? 'global' : _b, children = _a.children;\n    var _c = useReducer(function (x) { return x + 1; }, 0), forceUpdate = _c[1];\n    var sheetIds = Object.keys(sheetsRegistry[context] || sheetsRegistry['global'] || {});\n    var onRegister = React.useCallback(function () {\n        // Rerender when a new sheet is added.\n        forceUpdate();\n    }, [forceUpdate]);\n    useEffect(function () {\n        providerRegistryStack.indexOf(context) > -1\n            ? providerRegistryStack.indexOf(context)\n            : providerRegistryStack.push(context) - 1;\n        var unsub = actionSheetEventManager.subscribe(\"\".concat(context, \"-on-register\"), onRegister);\n        return function () {\n            providerRegistryStack.splice(providerRegistryStack.indexOf(context), 1);\n            unsub === null || unsub === void 0 ? void 0 : unsub.unsubscribe();\n        };\n    }, [context, onRegister]);\n    var renderSheet = function (sheetId) { return (<RenderSheet key={sheetId} id={sheetId} context={context}/>); };\n    return (<>\n      {children}\n      {sheetIds.map(renderSheet)}\n    </>);\n}\nvar ProviderContext = createContext('global');\nvar SheetIDContext = createContext(undefined);\n/**\n * Get id of the current context.\n */\nexport var useProviderContext = function () { return useContext(ProviderContext); };\n/**\n * Get id of the current sheet\n */\nexport var useSheetIDContext = function () { return useContext(SheetIDContext); };\nvar RenderSheet = function (_a) {\n    var _b, _c;\n    var id = _a.id, context = _a.context;\n    var _d = useState(), payload = _d[0], setPayload = _d[1];\n    var _e = useState(false), visible = _e[0], setVisible = _e[1];\n    var Sheet = context.startsWith('$$-auto-')\n        ? (_b = sheetsRegistry === null || sheetsRegistry === void 0 ? void 0 : sheetsRegistry.global) === null || _b === void 0 ? void 0 : _b[id]\n        : sheetsRegistry[context]\n            ? (_c = sheetsRegistry[context]) === null || _c === void 0 ? void 0 : _c[id]\n            : undefined;\n    var onShow = React.useCallback(function (data, ctx) {\n        if (ctx === void 0) { ctx = 'global'; }\n        if (ctx !== context)\n            return;\n        setPayload(data);\n        setVisible(true);\n    }, [context]);\n    var onClose = React.useCallback(function (_data, ctx) {\n        if (ctx === void 0) { ctx = 'global'; }\n        if (context !== ctx)\n            return;\n        setVisible(false);\n        setTimeout(function () {\n            setPayload(undefined);\n        }, 1);\n    }, [context]);\n    var onHide = React.useCallback(function (data, ctx) {\n        if (ctx === void 0) { ctx = 'global'; }\n        actionSheetEventManager.publish(\"hide_\".concat(id), data, ctx);\n    }, [id]);\n    useEffect(function () {\n        if (visible) {\n            actionSheetEventManager.publish(\"show_\".concat(id), payload, context);\n        }\n    }, [context, id, payload, visible]);\n    useEffect(function () {\n        var subs = [\n            actionSheetEventManager.subscribe(\"show_wrap_\".concat(id), onShow),\n            actionSheetEventManager.subscribe(\"onclose_\".concat(id), onClose),\n            actionSheetEventManager.subscribe(\"hide_wrap_\".concat(id), onHide),\n        ];\n        return function () {\n            subs.forEach(function (s) { return s.unsubscribe(); });\n        };\n    }, [id, context, onShow, onHide, onClose]);\n    if (!Sheet)\n        return null;\n    return !visible ? null : (<ProviderContext.Provider value={context}>\n      <SheetIDContext.Provider value={id}>\n        <Sheet sheetId={id} payload={payload}/>\n      </SheetIDContext.Provider>\n    </ProviderContext.Provider>);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}