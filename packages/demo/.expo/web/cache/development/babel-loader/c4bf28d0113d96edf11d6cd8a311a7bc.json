{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/josh/src/ui/node_modules/react-native-calendars/src/agenda/index.js\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport isFunction from 'lodash/isFunction';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport memoize from 'memoize-one';\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport { extractCalendarListProps, extractReservationListProps } from '../componentUpdater';\nimport { xdateToData, toMarkingFormat } from '../interface';\nimport { sameDate, sameMonth } from '../dateutils';\nimport { AGENDA_CALENDAR_KNOB } from '../testIDs';\nimport { VelocityTracker } from '../velocityTracker';\nimport { getCalendarDateString } from '../services';\nimport styleConstructor from './style';\nimport WeekDaysNames from '../commons/WeekDaysNames';\nimport CalendarList from '../calendar-list';\nimport ReservationList from './reservation-list';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar HEADER_HEIGHT = 104;\nvar KNOB_HEIGHT = 24;\nvar Agenda = function (_Component) {\n  _inherits(Agenda, _Component);\n  var _super = _createSuper(Agenda);\n  function Agenda(props) {\n    var _this;\n    _classCallCheck(this, Agenda);\n    _this = _super.call(this, props);\n    _this.scrollPad = React.createRef();\n    _this.calendar = React.createRef();\n    _this.knob = React.createRef();\n    _this.list = React.createRef();\n    _this.initialScrollPadPosition = function () {\n      return Math.max(0, _this.viewHeight - HEADER_HEIGHT);\n    };\n    _this.setScrollPadPosition = function (y, animated) {\n      var _this$scrollPad, _this$scrollPad$curre;\n      if ((_this$scrollPad = _this.scrollPad) != null && (_this$scrollPad$curre = _this$scrollPad.current) != null && _this$scrollPad$curre.scrollTo) {\n        _this.scrollPad.current.scrollTo({\n          x: 0,\n          y: y,\n          animated: animated\n        });\n      } else {\n        var _this$scrollPad2, _this$scrollPad2$curr;\n        (_this$scrollPad2 = _this.scrollPad) == null ? void 0 : (_this$scrollPad2$curr = _this$scrollPad2.current) == null ? void 0 : _this$scrollPad2$curr.getNode().scrollTo({\n          x: 0,\n          y: y,\n          animated: animated\n        });\n      }\n    };\n    _this.toggleCalendarPosition = function (open) {\n      var maxY = _this.initialScrollPadPosition();\n      _this.setScrollPadPosition(open ? 0 : maxY, true);\n      _this.enableCalendarScrolling(open);\n    };\n    _this.onDayPress = function (d) {\n      _this.chooseDay(d, !_this.state.calendarScrollable);\n    };\n    _this.generateMarkings = memoize(function (selectedDay, markedDates, items) {\n      if (!markedDates) {\n        markedDates = {};\n        if (items) {\n          Object.keys(items).forEach(function (key) {\n            if (items[key] && items[key].length) {\n              markedDates[key] = {\n                marked: true\n              };\n            }\n          });\n        }\n      }\n      var key = toMarkingFormat(selectedDay);\n      return _objectSpread(_objectSpread({}, markedDates), {}, _defineProperty({}, key, _objectSpread(_objectSpread({}, markedDates[key] || {}), {\n        selected: true\n      })));\n    });\n    _this.onScrollPadLayout = function () {\n      _this.setScrollPadPosition(_this.initialScrollPadPosition(), false);\n      setTimeout(function () {\n        return _this.setState({\n          calendarIsReady: true\n        });\n      }, 0);\n    };\n    _this.onCalendarListLayout = function () {\n      var _this$calendar, _this$calendar$curren;\n      (_this$calendar = _this.calendar) == null ? void 0 : (_this$calendar$curren = _this$calendar.current) == null ? void 0 : _this$calendar$curren.scrollToDay(_this.state.selectedDay, _this.calendarOffset(), false);\n    };\n    _this.onLayout = function (event) {\n      _this.viewHeight = event.nativeEvent.layout.height;\n      _this.viewWidth = event.nativeEvent.layout.width;\n      _this.forceUpdate();\n    };\n    _this.onTouchStart = function () {\n      var _this$knob, _this$knob$current;\n      _this.headerState = 'touched';\n      (_this$knob = _this.knob) == null ? void 0 : (_this$knob$current = _this$knob.current) == null ? void 0 : _this$knob$current.setNativeProps({\n        style: {\n          opacity: 0.5\n        }\n      });\n    };\n    _this.onTouchEnd = function () {\n      var _this$knob2, _this$knob2$current;\n      (_this$knob2 = _this.knob) == null ? void 0 : (_this$knob2$current = _this$knob2.current) == null ? void 0 : _this$knob2$current.setNativeProps({\n        style: {\n          opacity: 1\n        }\n      });\n      if (_this.headerState === 'touched') {\n        var isOpen = _this.state.calendarScrollable;\n        _this.toggleCalendarPosition(!isOpen);\n      }\n      _this.headerState = 'idle';\n    };\n    _this.onStartDrag = function () {\n      _this.headerState = 'dragged';\n      _this.knobTracker.reset();\n    };\n    _this.onSnapAfterDrag = function (e) {\n      _this.onTouchEnd();\n      var currentY = e.nativeEvent.contentOffset.y;\n      _this.knobTracker.add(currentY);\n      var projectedY = currentY + _this.knobTracker.estimateSpeed() * 250;\n      var maxY = _this.initialScrollPadPosition();\n      var snapY = projectedY > maxY / 2 ? maxY : 0;\n      _this.setScrollPadPosition(snapY, true);\n      _this.enableCalendarScrolling(snapY === 0);\n    };\n    _this.onVisibleMonthsChange = function (months) {\n      _this.props.onVisibleMonthsChange == null ? void 0 : _this.props.onVisibleMonthsChange(months);\n      if (_this.props.items && !_this.state.firstReservationLoad) {\n        if (_this.scrollTimeout) {\n          clearTimeout(_this.scrollTimeout);\n        }\n        _this.scrollTimeout = setTimeout(function () {\n          if (_this._isMounted) {\n            _this.props.loadItemsForMonth == null ? void 0 : _this.props.loadItemsForMonth(months[0]);\n          }\n        }, 200);\n      }\n    };\n    _this.onDayChange = function (day) {\n      var _this$calendar2, _this$calendar2$curre;\n      var withAnimation = sameMonth(day, _this.state.selectedDay);\n      (_this$calendar2 = _this.calendar) == null ? void 0 : (_this$calendar2$curre = _this$calendar2.current) == null ? void 0 : _this$calendar2$curre.scrollToDay(day, _this.calendarOffset(), withAnimation);\n      _this.setState({\n        selectedDay: day\n      });\n      _this.props.onDayChange == null ? void 0 : _this.props.onDayChange(xdateToData(day));\n    };\n    _this.renderWeekDaysNames = function () {\n      return _jsxDEV(WeekDaysNames, {\n        firstDay: _this.props.firstDay,\n        style: _this.style.dayHeader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }, _assertThisInitialized(_this));\n    };\n    _this.renderWeekNumbersSpace = function () {\n      return _this.props.showWeekNumbers && _jsxDEV(View, {\n        style: _this.style.dayHeader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 46\n      }, _assertThisInitialized(_this));\n    };\n    _this.style = styleConstructor(props.theme);\n    var windowSize = Dimensions.get('window');\n    _this.viewHeight = windowSize.height;\n    _this.viewWidth = windowSize.width;\n    _this.scrollTimeout = undefined;\n    _this.headerState = 'idle';\n    _this.state = {\n      scrollY: new Animated.Value(0),\n      calendarIsReady: false,\n      calendarScrollable: false,\n      firstReservationLoad: false,\n      selectedDay: _this.getSelectedDate(props.selected),\n      topDay: _this.getSelectedDate(props.selected)\n    };\n    _this.currentMonth = _this.state.selectedDay.clone();\n    _this.knobTracker = new VelocityTracker();\n    _this.state.scrollY.addListener(function (_ref) {\n      var value = _ref.value;\n      return _this.knobTracker.add(value);\n    });\n    return _this;\n  }\n  _createClass(Agenda, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      this.loadReservations(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n      this.state.scrollY.removeAllListeners();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var newSelectedDate = this.getSelectedDate(this.props.selected);\n      if (!sameDate(newSelectedDate, prevState.selectedDay)) {\n        var prevSelectedDate = this.getSelectedDate(prevProps.selected);\n        if (!sameDate(newSelectedDate, prevSelectedDate)) {\n          var _this$calendar3, _this$calendar3$curre;\n          this.setState({\n            selectedDay: newSelectedDate\n          });\n          (_this$calendar3 = this.calendar) == null ? void 0 : (_this$calendar3$curre = _this$calendar3.current) == null ? void 0 : _this$calendar3$curre.scrollToDay(newSelectedDate, this.calendarOffset(), true);\n        }\n      } else if (!prevProps.items) {\n        this.loadReservations(this.props);\n      }\n    }\n  }, {\n    key: \"getSelectedDate\",\n    value: function getSelectedDate(date) {\n      return date ? new XDate(date) : new XDate(true);\n    }\n  }, {\n    key: \"calendarOffset\",\n    value: function calendarOffset() {\n      return 96 - this.viewHeight / 2;\n    }\n  }, {\n    key: \"enableCalendarScrolling\",\n    value: function enableCalendarScrolling() {\n      var _this$props$onCalenda, _this$props, _this$calendar4, _this$calendar4$curre;\n      var enable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.setState({\n        calendarScrollable: enable\n      });\n      (_this$props$onCalenda = (_this$props = this.props).onCalendarToggled) == null ? void 0 : _this$props$onCalenda.call(_this$props, enable);\n      (_this$calendar4 = this.calendar) == null ? void 0 : (_this$calendar4$curre = _this$calendar4.current) == null ? void 0 : _this$calendar4$curre.scrollToDay(this.state.selectedDay, this.calendarOffset() + 1, true);\n    }\n  }, {\n    key: \"loadReservations\",\n    value: function loadReservations(props) {\n      var _this2 = this;\n      if ((!props.items || !Object.keys(props.items).length) && !this.state.firstReservationLoad) {\n        this.setState({\n          firstReservationLoad: true\n        }, function () {\n          _this2.props.loadItemsForMonth == null ? void 0 : _this2.props.loadItemsForMonth(xdateToData(_this2.state.selectedDay));\n        });\n      }\n    }\n  }, {\n    key: \"chooseDay\",\n    value: function chooseDay(d, optimisticScroll) {\n      var _this$props$onCalenda2, _this$props2, _this$calendar5, _this$calendar5$curre, _this$props$loadItems, _this$props3, _this$props$onDayPres, _this$props4;\n      var day = new XDate(d.dateString);\n      this.setState({\n        calendarScrollable: false,\n        selectedDay: day.clone()\n      });\n      (_this$props$onCalenda2 = (_this$props2 = this.props).onCalendarToggled) == null ? void 0 : _this$props$onCalenda2.call(_this$props2, false);\n      if (!optimisticScroll) {\n        this.setState({\n          topDay: day.clone()\n        });\n      }\n      this.setScrollPadPosition(this.initialScrollPadPosition(), true);\n      (_this$calendar5 = this.calendar) == null ? void 0 : (_this$calendar5$curre = _this$calendar5.current) == null ? void 0 : _this$calendar5$curre.scrollToDay(day, this.calendarOffset(), true);\n      (_this$props$loadItems = (_this$props3 = this.props).loadItemsForMonth) == null ? void 0 : _this$props$loadItems.call(_this$props3, xdateToData(day));\n      (_this$props$onDayPres = (_this$props4 = this.props).onDayPress) == null ? void 0 : _this$props$onDayPres.call(_this$props4, xdateToData(day));\n    }\n  }, {\n    key: \"renderReservations\",\n    value: function renderReservations() {\n      var reservationListProps = extractReservationListProps(this.props);\n      if (isFunction(this.props.renderList)) {\n        return this.props.renderList(_objectSpread(_objectSpread({}, reservationListProps), {}, {\n          selectedDay: this.state.selectedDay,\n          topDay: this.state.topDay,\n          onDayChange: this.onDayChange\n        }));\n      }\n      return _jsxDEV(ReservationList, _objectSpread(_objectSpread({}, reservationListProps), {}, {\n        ref: this.list,\n        selectedDay: this.state.selectedDay,\n        topDay: this.state.topDay,\n        onDayChange: this.onDayChange\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }, this);\n    }\n  }, {\n    key: \"renderCalendarList\",\n    value: function renderCalendarList() {\n      var _this$props5 = this.props,\n        markedDates = _this$props5.markedDates,\n        items = _this$props5.items;\n      var shouldHideExtraDays = this.state.calendarScrollable ? this.props.hideExtraDays : false;\n      var calendarListProps = extractCalendarListProps(this.props);\n      return _jsxDEV(CalendarList, _objectSpread(_objectSpread({}, calendarListProps), {}, {\n        ref: this.calendar,\n        current: getCalendarDateString(this.currentMonth.toString()),\n        markedDates: this.generateMarkings(this.state.selectedDay, markedDates, items),\n        calendarWidth: this.viewWidth,\n        scrollEnabled: this.state.calendarScrollable,\n        hideExtraDays: shouldHideExtraDays,\n        onLayout: this.onCalendarListLayout,\n        onDayPress: this.onDayPress,\n        onVisibleMonthsChange: this.onVisibleMonthsChange\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }, this);\n    }\n  }, {\n    key: \"renderKnob\",\n    value: function renderKnob() {\n      var _this$props6 = this.props,\n        showClosingKnob = _this$props6.showClosingKnob,\n        hideKnob = _this$props6.hideKnob,\n        renderKnob = _this$props6.renderKnob;\n      var knob = _jsxDEV(View, {\n        style: this.style.knobContainer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 20\n      }, this);\n      if (!hideKnob) {\n        var knobView = renderKnob ? renderKnob() : _jsxDEV(View, {\n          style: this.style.knob\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 58\n        }, this);\n        knob = !this.state.calendarScrollable || showClosingKnob ? _jsxDEV(View, {\n          style: this.style.knobContainer,\n          children: _jsxDEV(View, {\n            ref: this.knob,\n            children: knobView\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 73\n        }, this) : null;\n      }\n      return knob;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props7 = this.props,\n        hideKnob = _this$props7.hideKnob,\n        style = _this$props7.style,\n        testID = _this$props7.testID;\n      var agendaHeight = this.initialScrollPadPosition();\n      var weekdaysStyle = [this.style.weekdays, {\n        opacity: this.state.scrollY.interpolate({\n          inputRange: [agendaHeight - HEADER_HEIGHT, agendaHeight],\n          outputRange: [0, 1],\n          extrapolate: 'clamp'\n        }),\n        transform: [{\n          translateY: this.state.scrollY.interpolate({\n            inputRange: [Math.max(0, agendaHeight - HEADER_HEIGHT), agendaHeight],\n            outputRange: [-HEADER_HEIGHT, 0],\n            extrapolate: 'clamp'\n          })\n        }]\n      }];\n      var headerTranslate = this.state.scrollY.interpolate({\n        inputRange: [0, agendaHeight],\n        outputRange: [agendaHeight, 0],\n        extrapolate: 'clamp'\n      });\n      var contentTranslate = this.state.scrollY.interpolate({\n        inputRange: [0, agendaHeight],\n        outputRange: [0, agendaHeight / 2],\n        extrapolate: 'clamp'\n      });\n      var headerStyle = [this.style.header, {\n        bottom: agendaHeight,\n        transform: [{\n          translateY: headerTranslate\n        }]\n      }];\n      if (!this.state.calendarIsReady) {\n        headerStyle.push({\n          height: 0\n        });\n        weekdaysStyle.push({\n          height: HEADER_HEIGHT\n        });\n      }\n      var openCalendarScrollPadPosition = !hideKnob && this.state.calendarScrollable && this.props.showClosingKnob ? agendaHeight + HEADER_HEIGHT : 0;\n      var shouldAllowDragging = !hideKnob && !this.state.calendarScrollable;\n      var scrollPadPosition = (shouldAllowDragging ? HEADER_HEIGHT : openCalendarScrollPadPosition) - KNOB_HEIGHT;\n      var scrollPadStyle = {\n        height: KNOB_HEIGHT,\n        top: scrollPadPosition\n      };\n      return _jsxDEV(View, {\n        testID: testID,\n        onLayout: this.onLayout,\n        style: [style, this.style.container],\n        children: [_jsxDEV(View, {\n          style: this.style.reservations,\n          children: this.renderReservations()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 9\n        }, this), _jsxDEV(Animated.View, {\n          style: headerStyle,\n          children: [_jsxDEV(Animated.View, {\n            style: [this.style.animatedContainer, {\n              transform: [{\n                translateY: contentTranslate\n              }]\n            }],\n            children: this.renderCalendarList()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 11\n          }, this), this.renderKnob()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 9\n        }, this), _jsxDEV(Animated.View, {\n          style: weekdaysStyle,\n          children: [this.renderWeekNumbersSpace(), this.renderWeekDaysNames()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 9\n        }, this), _jsxDEV(Animated.ScrollView, {\n          ref: this.scrollPad,\n          style: [this.style.scrollPadStyle, scrollPadStyle],\n          overScrollMode: \"never\",\n          showsHorizontalScrollIndicator: false,\n          showsVerticalScrollIndicator: false,\n          scrollEventThrottle: 8,\n          scrollsToTop: false,\n          onTouchStart: this.onTouchStart,\n          onTouchEnd: this.onTouchEnd,\n          onScrollBeginDrag: this.onStartDrag,\n          onScrollEndDrag: this.onSnapAfterDrag,\n          onScroll: Animated.event([{\n            nativeEvent: {\n              contentOffset: {\n                y: this.state.scrollY\n              }\n            }\n          }], {\n            useNativeDriver: true\n          }),\n          children: _jsxDEV(View, {\n            testID: AGENDA_CALENDAR_KNOB,\n            style: {\n              height: agendaHeight + KNOB_HEIGHT\n            },\n            onLayout: this.onScrollPadLayout\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 17\n      }, this);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps) {\n      if (nextProps.items) {\n        return {\n          firstReservationLoad: false\n        };\n      }\n      return null;\n    }\n  }]);\n  return Agenda;\n}(Component);\nAgenda.displayName = 'Agenda';\nAgenda.propTypes = _objectSpread(_objectSpread(_objectSpread({}, CalendarList.propTypes), ReservationList.propTypes), {}, {\n  items: PropTypes.object,\n  style: PropTypes.oneOfType([PropTypes.object, PropTypes.array, PropTypes.number]),\n  loadItemsForMonth: PropTypes.func,\n  onCalendarToggled: PropTypes.func,\n  onDayChange: PropTypes.func,\n  renderKnob: PropTypes.func,\n  renderList: PropTypes.func,\n  selected: PropTypes.any,\n  hideKnob: PropTypes.bool,\n  showClosingKnob: PropTypes.bool\n});\nexport { Agenda as default };","map":{"version":3,"names":["isFunction","PropTypes","XDate","memoize","React","Component","View","Dimensions","Animated","extractCalendarListProps","extractReservationListProps","xdateToData","toMarkingFormat","sameDate","sameMonth","AGENDA_CALENDAR_KNOB","VelocityTracker","getCalendarDateString","styleConstructor","WeekDaysNames","CalendarList","ReservationList","jsxDEV","_jsxDEV","HEADER_HEIGHT","KNOB_HEIGHT","Agenda","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","scrollPad","createRef","calendar","knob","list","initialScrollPadPosition","Math","max","viewHeight","setScrollPadPosition","y","animated","_this$scrollPad","_this$scrollPad$curre","current","scrollTo","x","_this$scrollPad2","_this$scrollPad2$curr","getNode","toggleCalendarPosition","open","maxY","enableCalendarScrolling","onDayPress","d","chooseDay","state","calendarScrollable","generateMarkings","selectedDay","markedDates","items","Object","keys","forEach","key","length","marked","_objectSpread","_defineProperty","selected","onScrollPadLayout","setTimeout","setState","calendarIsReady","onCalendarListLayout","_this$calendar","_this$calendar$curren","scrollToDay","calendarOffset","onLayout","event","nativeEvent","layout","height","viewWidth","width","forceUpdate","onTouchStart","_this$knob","_this$knob$current","headerState","setNativeProps","style","opacity","onTouchEnd","_this$knob2","_this$knob2$current","isOpen","onStartDrag","knobTracker","reset","onSnapAfterDrag","e","currentY","contentOffset","add","projectedY","estimateSpeed","snapY","onVisibleMonthsChange","months","firstReservationLoad","scrollTimeout","clearTimeout","_isMounted","loadItemsForMonth","onDayChange","day","_this$calendar2","_this$calendar2$curre","withAnimation","renderWeekDaysNames","firstDay","dayHeader","fileName","_jsxFileName","lineNumber","columnNumber","_assertThisInitialized","renderWeekNumbersSpace","showWeekNumbers","theme","windowSize","get","undefined","scrollY","Value","getSelectedDate","topDay","currentMonth","clone","addListener","_ref","value","_createClass","componentDidMount","loadReservations","componentWillUnmount","removeAllListeners","componentDidUpdate","prevProps","prevState","newSelectedDate","prevSelectedDate","_this$calendar3","_this$calendar3$curre","date","_this$props$onCalenda","_this$props","_this$calendar4","_this$calendar4$curre","enable","arguments","onCalendarToggled","_this2","optimisticScroll","_this$props$onCalenda2","_this$props2","_this$calendar5","_this$calendar5$curre","_this$props$loadItems","_this$props3","_this$props$onDayPres","_this$props4","dateString","renderReservations","reservationListProps","renderList","ref","renderCalendarList","_this$props5","shouldHideExtraDays","hideExtraDays","calendarListProps","toString","calendarWidth","scrollEnabled","renderKnob","_this$props6","showClosingKnob","hideKnob","knobContainer","knobView","children","render","_this$props7","testID","agendaHeight","weekdaysStyle","weekdays","interpolate","inputRange","outputRange","extrapolate","transform","translateY","headerTranslate","contentTranslate","headerStyle","header","bottom","push","openCalendarScrollPadPosition","shouldAllowDragging","scrollPadPosition","scrollPadStyle","top","container","reservations","animatedContainer","ScrollView","overScrollMode","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","scrollEventThrottle","scrollsToTop","onScrollBeginDrag","onScrollEndDrag","onScroll","useNativeDriver","getDerivedStateFromProps","nextProps","displayName","propTypes","object","oneOfType","array","number","func","any","bool","default"],"sources":["/Users/josh/src/ui/node_modules/react-native-calendars/src/agenda/index.js"],"sourcesContent":["import isFunction from 'lodash/isFunction';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport memoize from 'memoize-one';\nimport React, { Component } from 'react';\nimport { View, Dimensions, Animated } from 'react-native';\nimport { extractCalendarListProps, extractReservationListProps } from '../componentUpdater';\nimport { xdateToData, toMarkingFormat } from '../interface';\nimport { sameDate, sameMonth } from '../dateutils';\nimport { AGENDA_CALENDAR_KNOB } from '../testIDs';\nimport { VelocityTracker } from '../velocityTracker';\nimport { getCalendarDateString } from '../services';\nimport styleConstructor from './style';\nimport WeekDaysNames from '../commons/WeekDaysNames';\nimport CalendarList from '../calendar-list';\nimport ReservationList from './reservation-list';\nconst HEADER_HEIGHT = 104;\nconst KNOB_HEIGHT = 24;\n/**\n * @description: Agenda component\n * @extends: CalendarList\n * @extendslink: docs/CalendarList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/agenda.js\n * @gif: https://github.com/wix/react-native-calendars/blob/master/demo/assets/agenda.gif\n */\nexport default class Agenda extends Component {\n    static displayName = 'Agenda';\n    static propTypes = {\n        ...CalendarList.propTypes,\n        ...ReservationList.propTypes,\n        items: PropTypes.object,\n        style: PropTypes.oneOfType([PropTypes.object, PropTypes.array, PropTypes.number]),\n        loadItemsForMonth: PropTypes.func,\n        onCalendarToggled: PropTypes.func,\n        onDayChange: PropTypes.func,\n        renderKnob: PropTypes.func,\n        renderList: PropTypes.func,\n        selected: PropTypes.any,\n        hideKnob: PropTypes.bool,\n        showClosingKnob: PropTypes.bool\n    };\n    style;\n    viewHeight;\n    viewWidth;\n    scrollTimeout;\n    headerState;\n    currentMonth;\n    knobTracker;\n    _isMounted;\n    scrollPad = React.createRef();\n    calendar = React.createRef();\n    knob = React.createRef();\n    list = React.createRef();\n    constructor(props) {\n        super(props);\n        this.style = styleConstructor(props.theme);\n        const windowSize = Dimensions.get('window');\n        this.viewHeight = windowSize.height;\n        this.viewWidth = windowSize.width;\n        this.scrollTimeout = undefined;\n        this.headerState = 'idle';\n        this.state = {\n            scrollY: new Animated.Value(0),\n            calendarIsReady: false,\n            calendarScrollable: false,\n            firstReservationLoad: false,\n            selectedDay: this.getSelectedDate(props.selected),\n            topDay: this.getSelectedDate(props.selected)\n        };\n        this.currentMonth = this.state.selectedDay.clone();\n        this.knobTracker = new VelocityTracker();\n        this.state.scrollY.addListener(({ value }) => this.knobTracker.add(value));\n    }\n    componentDidMount() {\n        this._isMounted = true;\n        this.loadReservations(this.props);\n    }\n    componentWillUnmount() {\n        this._isMounted = false;\n        this.state.scrollY.removeAllListeners();\n    }\n    componentDidUpdate(prevProps, prevState) {\n        const newSelectedDate = this.getSelectedDate(this.props.selected);\n        if (!sameDate(newSelectedDate, prevState.selectedDay)) {\n            const prevSelectedDate = this.getSelectedDate(prevProps.selected);\n            if (!sameDate(newSelectedDate, prevSelectedDate)) {\n                this.setState({ selectedDay: newSelectedDate });\n                this.calendar?.current?.scrollToDay(newSelectedDate, this.calendarOffset(), true);\n            }\n        }\n        else if (!prevProps.items) {\n            this.loadReservations(this.props);\n        }\n    }\n    static getDerivedStateFromProps(nextProps) {\n        if (nextProps.items) {\n            return { firstReservationLoad: false };\n        }\n        return null;\n    }\n    getSelectedDate(date) {\n        return date ? new XDate(date) : new XDate(true);\n    }\n    calendarOffset() {\n        return 96 - this.viewHeight / 2;\n    }\n    initialScrollPadPosition = () => {\n        return Math.max(0, this.viewHeight - HEADER_HEIGHT);\n    };\n    setScrollPadPosition = (y, animated) => {\n        if (this.scrollPad?.current?.scrollTo) {\n            this.scrollPad.current.scrollTo({ x: 0, y, animated });\n        }\n        else {\n            // Support for RN O.61 (Expo 37)\n            this.scrollPad?.current?.getNode().scrollTo({ x: 0, y, animated });\n        }\n    };\n    toggleCalendarPosition = (open) => {\n        const maxY = this.initialScrollPadPosition();\n        this.setScrollPadPosition(open ? 0 : maxY, true);\n        this.enableCalendarScrolling(open);\n    };\n    enableCalendarScrolling(enable = true) {\n        this.setState({ calendarScrollable: enable });\n        this.props.onCalendarToggled?.(enable);\n        // Enlarge calendarOffset here as a workaround on iOS to force repaint.\n        // Otherwise the month after current one or before current one remains invisible.\n        // The problem is caused by overflow: 'hidden' style, which we need for dragging\n        // to be performant.\n        // Another working solution for this bug would be to set removeClippedSubviews={false}\n        // in CalendarList listView, but that might impact performance when scrolling\n        // month list in expanded CalendarList.\n        // Further info https://github.com/facebook/react-native/issues/1831\n        this.calendar?.current?.scrollToDay(this.state.selectedDay, this.calendarOffset() + 1, true);\n    }\n    loadReservations(props) {\n        if ((!props.items || !Object.keys(props.items).length) && !this.state.firstReservationLoad) {\n            this.setState({ firstReservationLoad: true }, () => {\n                this.props.loadItemsForMonth?.(xdateToData(this.state.selectedDay));\n            });\n        }\n    }\n    onDayPress = (d) => {\n        this.chooseDay(d, !this.state.calendarScrollable);\n    };\n    chooseDay(d, optimisticScroll) {\n        const day = new XDate(d.dateString);\n        this.setState({\n            calendarScrollable: false,\n            selectedDay: day.clone()\n        });\n        this.props.onCalendarToggled?.(false);\n        if (!optimisticScroll) {\n            this.setState({ topDay: day.clone() });\n        }\n        this.setScrollPadPosition(this.initialScrollPadPosition(), true);\n        this.calendar?.current?.scrollToDay(day, this.calendarOffset(), true);\n        this.props.loadItemsForMonth?.(xdateToData(day));\n        this.props.onDayPress?.(xdateToData(day));\n    }\n    generateMarkings = memoize((selectedDay, markedDates, items) => {\n        if (!markedDates) {\n            markedDates = {};\n            if (items) {\n                Object.keys(items).forEach(key => {\n                    if (items[key] && items[key].length) {\n                        markedDates[key] = { marked: true };\n                    }\n                });\n            }\n        }\n        const key = toMarkingFormat(selectedDay);\n        return { ...markedDates, [key]: { ...(markedDates[key] || {}), ...{ selected: true } } };\n    });\n    onScrollPadLayout = () => {\n        // When user touches knob, the actual component that receives touch events is a ScrollView.\n        // It needs to be scrolled to the bottom, so that when user moves finger downwards,\n        // scroll position actually changes (it would stay at 0, when scrolled to the top).\n        this.setScrollPadPosition(this.initialScrollPadPosition(), false);\n        // delay rendering calendar in full height because otherwise it still flickers sometimes\n        setTimeout(() => this.setState({ calendarIsReady: true }), 0);\n    };\n    onCalendarListLayout = () => {\n        this.calendar?.current?.scrollToDay(this.state.selectedDay, this.calendarOffset(), false);\n    };\n    onLayout = (event) => {\n        this.viewHeight = event.nativeEvent.layout.height;\n        this.viewWidth = event.nativeEvent.layout.width;\n        this.forceUpdate();\n    };\n    onTouchStart = () => {\n        this.headerState = 'touched';\n        this.knob?.current?.setNativeProps({ style: { opacity: 0.5 } });\n    };\n    onTouchEnd = () => {\n        this.knob?.current?.setNativeProps({ style: { opacity: 1 } });\n        if (this.headerState === 'touched') {\n            const isOpen = this.state.calendarScrollable;\n            this.toggleCalendarPosition(!isOpen);\n        }\n        this.headerState = 'idle';\n    };\n    onStartDrag = () => {\n        this.headerState = 'dragged';\n        this.knobTracker.reset();\n    };\n    onSnapAfterDrag = (e) => {\n        // on Android onTouchEnd is not called if dragging was started\n        this.onTouchEnd();\n        const currentY = e.nativeEvent.contentOffset.y;\n        this.knobTracker.add(currentY);\n        const projectedY = currentY + this.knobTracker.estimateSpeed() * 250; /*ms*/\n        const maxY = this.initialScrollPadPosition();\n        const snapY = projectedY > maxY / 2 ? maxY : 0;\n        this.setScrollPadPosition(snapY, true);\n        this.enableCalendarScrolling(snapY === 0);\n    };\n    onVisibleMonthsChange = (months) => {\n        this.props.onVisibleMonthsChange?.(months);\n        if (this.props.items && !this.state.firstReservationLoad) {\n            if (this.scrollTimeout) {\n                clearTimeout(this.scrollTimeout);\n            }\n            this.scrollTimeout = setTimeout(() => {\n                if (this._isMounted) {\n                    this.props.loadItemsForMonth?.(months[0]);\n                }\n            }, 200);\n        }\n    };\n    onDayChange = (day) => {\n        const withAnimation = sameMonth(day, this.state.selectedDay);\n        this.calendar?.current?.scrollToDay(day, this.calendarOffset(), withAnimation);\n        this.setState({ selectedDay: day });\n        this.props.onDayChange?.(xdateToData(day));\n    };\n    renderReservations() {\n        const reservationListProps = extractReservationListProps(this.props);\n        if (isFunction(this.props.renderList)) {\n            return this.props.renderList({\n                ...reservationListProps,\n                selectedDay: this.state.selectedDay,\n                topDay: this.state.topDay,\n                onDayChange: this.onDayChange,\n            });\n        }\n        return (<ReservationList {...reservationListProps} ref={this.list} selectedDay={this.state.selectedDay} topDay={this.state.topDay} onDayChange={this.onDayChange}/>);\n    }\n    renderCalendarList() {\n        const { markedDates, items } = this.props;\n        const shouldHideExtraDays = this.state.calendarScrollable ? this.props.hideExtraDays : false;\n        const calendarListProps = extractCalendarListProps(this.props);\n        return (<CalendarList {...calendarListProps} ref={this.calendar} current={getCalendarDateString(this.currentMonth.toString())} markedDates={this.generateMarkings(this.state.selectedDay, markedDates, items)} calendarWidth={this.viewWidth} scrollEnabled={this.state.calendarScrollable} hideExtraDays={shouldHideExtraDays} onLayout={this.onCalendarListLayout} onDayPress={this.onDayPress} onVisibleMonthsChange={this.onVisibleMonthsChange}/>);\n    }\n    renderKnob() {\n        const { showClosingKnob, hideKnob, renderKnob } = this.props;\n        let knob = <View style={this.style.knobContainer}/>;\n        if (!hideKnob) {\n            const knobView = renderKnob ? renderKnob() : <View style={this.style.knob}/>;\n            knob = !this.state.calendarScrollable || showClosingKnob ? (<View style={this.style.knobContainer}>\n          <View ref={this.knob}>{knobView}</View>\n        </View>) : null;\n        }\n        return knob;\n    }\n    renderWeekDaysNames = () => {\n        return (<WeekDaysNames firstDay={this.props.firstDay} style={this.style.dayHeader}/>);\n    };\n    renderWeekNumbersSpace = () => {\n        return this.props.showWeekNumbers && <View style={this.style.dayHeader}/>;\n    };\n    render() {\n        const { hideKnob, style, testID } = this.props;\n        const agendaHeight = this.initialScrollPadPosition();\n        const weekdaysStyle = [\n            this.style.weekdays,\n            {\n                opacity: this.state.scrollY.interpolate({\n                    inputRange: [agendaHeight - HEADER_HEIGHT, agendaHeight],\n                    outputRange: [0, 1],\n                    extrapolate: 'clamp'\n                }),\n                transform: [\n                    {\n                        translateY: this.state.scrollY.interpolate({\n                            inputRange: [Math.max(0, agendaHeight - HEADER_HEIGHT), agendaHeight],\n                            outputRange: [-HEADER_HEIGHT, 0],\n                            extrapolate: 'clamp'\n                        })\n                    }\n                ]\n            }\n        ];\n        const headerTranslate = this.state.scrollY.interpolate({\n            inputRange: [0, agendaHeight],\n            outputRange: [agendaHeight, 0],\n            extrapolate: 'clamp'\n        });\n        const contentTranslate = this.state.scrollY.interpolate({\n            inputRange: [0, agendaHeight],\n            outputRange: [0, agendaHeight / 2],\n            extrapolate: 'clamp'\n        });\n        const headerStyle = [\n            this.style.header,\n            {\n                bottom: agendaHeight,\n                transform: [{ translateY: headerTranslate }]\n            }\n        ];\n        if (!this.state.calendarIsReady) {\n            // limit header height until everything is setup for calendar dragging\n            headerStyle.push({ height: 0 });\n            // fill header with appStyle.calendarBackground background to reduce flickering\n            weekdaysStyle.push({ height: HEADER_HEIGHT });\n        }\n        const openCalendarScrollPadPosition = !hideKnob && this.state.calendarScrollable && this.props.showClosingKnob ? agendaHeight + HEADER_HEIGHT : 0;\n        const shouldAllowDragging = !hideKnob && !this.state.calendarScrollable;\n        const scrollPadPosition = (shouldAllowDragging ? HEADER_HEIGHT : openCalendarScrollPadPosition) - KNOB_HEIGHT;\n        const scrollPadStyle = {\n            height: KNOB_HEIGHT,\n            top: scrollPadPosition,\n        };\n        return (<View testID={testID} onLayout={this.onLayout} style={[style, this.style.container]}>\n        <View style={this.style.reservations}>{this.renderReservations()}</View>\n        <Animated.View style={headerStyle}>\n          <Animated.View style={[this.style.animatedContainer, { transform: [{ translateY: contentTranslate }] }]}>\n            {this.renderCalendarList()}\n          </Animated.View>\n          {this.renderKnob()}\n        </Animated.View>\n        <Animated.View style={weekdaysStyle}>\n          {this.renderWeekNumbersSpace()}\n          {this.renderWeekDaysNames()}\n        </Animated.View>\n        <Animated.ScrollView ref={this.scrollPad} style={[this.style.scrollPadStyle, scrollPadStyle]} overScrollMode=\"never\" showsHorizontalScrollIndicator={false} showsVerticalScrollIndicator={false} scrollEventThrottle={8} scrollsToTop={false} onTouchStart={this.onTouchStart} onTouchEnd={this.onTouchEnd} onScrollBeginDrag={this.onStartDrag} onScrollEndDrag={this.onSnapAfterDrag} onScroll={Animated.event([{ nativeEvent: { contentOffset: { y: this.state.scrollY } } }], { useNativeDriver: true })}>\n          <View testID={AGENDA_CALENDAR_KNOB} style={{ height: agendaHeight + KNOB_HEIGHT }} onLayout={this.onScrollPadLayout}/>\n        </Animated.ScrollView>\n      </View>);\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}