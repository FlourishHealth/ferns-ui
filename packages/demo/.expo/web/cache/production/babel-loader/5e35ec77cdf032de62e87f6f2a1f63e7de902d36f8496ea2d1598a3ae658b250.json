{"ast":null,"code":"import{CodedError}from'expo-modules-core';import{getContext}from'../utils/getContext.web';export default(function(canvas,options){var _options$originX=options.originX,originX=_options$originX===void 0?0:_options$originX,_options$originY=options.originY,originY=_options$originY===void 0?0:_options$originY,_options$width=options.width,width=_options$width===void 0?0:_options$width,_options$height=options.height,height=_options$height===void 0?0:_options$height;var clamp=function clamp(value,max){return Math.max(0,Math.min(max,value));};width=clamp(width,canvas.width);height=clamp(height,canvas.height);originX=clamp(originX,canvas.width);originY=clamp(originY,canvas.height);width=Math.min(originX+width,canvas.width)-originX;height=Math.min(originY+height,canvas.height)-originY;if(width===0||height===0){throw new CodedError('ERR_IMAGE_MANIPULATOR_CROP','Crop size must be greater than 0: '+JSON.stringify(options,null,2));}var result=document.createElement('canvas');result.width=width;result.height=height;var context=getContext(result);context.drawImage(canvas,originX,originY,width,height,0,0,width,height);return result;});","map":{"version":3,"names":["CodedError","getContext","canvas","options","_options$originX","originX","_options$originY","originY","_options$width","width","_options$height","height","clamp","value","max","Math","min","JSON","stringify","result","document","createElement","context","drawImage"],"sources":["/Users/josh/src/ui/node_modules/expo-image-manipulator/src/actions/CropAction.web.ts"],"sourcesContent":["import { CodedError } from 'expo-modules-core';\n\nimport { ActionCrop } from '../ImageManipulator.types';\nimport { getContext } from '../utils/getContext.web';\n\nexport default (canvas: HTMLCanvasElement, options: ActionCrop['crop']) => {\n  // ensure values are defined.\n  let { originX = 0, originY = 0, width = 0, height = 0 } = options;\n  const clamp = (value, max) => Math.max(0, Math.min(max, value));\n  // lock within bounds.\n  width = clamp(width, canvas.width);\n  height = clamp(height, canvas.height);\n  originX = clamp(originX, canvas.width);\n  originY = clamp(originY, canvas.height);\n\n  // lock sum of crop.\n  width = Math.min(originX + width, canvas.width) - originX;\n  height = Math.min(originY + height, canvas.height) - originY;\n\n  if (width === 0 || height === 0) {\n    throw new CodedError(\n      'ERR_IMAGE_MANIPULATOR_CROP',\n      'Crop size must be greater than 0: ' + JSON.stringify(options, null, 2)\n    );\n  }\n\n  const result = document.createElement('canvas');\n  result.width = width;\n  result.height = height;\n\n  const context = getContext(result);\n  context.drawImage(canvas, originX, originY, width, height, 0, 0, width, height);\n\n  return result;\n};\n"],"mappings":"AAAA,OAASA,UAAU,KAAQ,mBAAmB,CAG9C,OAASC,UAAU,KAAQ,yBAAyB,CAEpD,eAAe,SAACC,MAAyB,CAAEC,OAA2B,CAAI,CAExE,IAAAC,gBAAA,CAA0DD,OAAO,CAA3DE,OAAO,CAAPA,OAAO,CAAAD,gBAAA,UAAG,CAAC,CAAAA,gBAAA,CAAAE,gBAAA,CAAyCH,OAAO,CAA9CI,OAAO,CAAPA,OAAO,CAAAD,gBAAA,UAAG,CAAC,CAAAA,gBAAA,CAAAE,cAAA,CAA4BL,OAAO,CAAjCM,KAAK,CAALA,KAAK,CAAAD,cAAA,UAAG,CAAC,CAAAA,cAAA,CAAAE,eAAA,CAAiBP,OAAO,CAAtBQ,MAAM,CAANA,MAAM,CAAAD,eAAA,UAAG,CAAC,CAAAA,eAAA,CACrD,GAAM,CAAAE,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAIC,KAAK,CAAEC,GAAG,QAAK,CAAAC,IAAI,CAACD,GAAG,CAAC,CAAC,CAAEC,IAAI,CAACC,GAAG,CAACF,GAAG,CAAED,KAAK,CAAC,CAAC,GAE/DJ,KAAK,CAAGG,KAAK,CAACH,KAAK,CAAEP,MAAM,CAACO,KAAK,CAAC,CAClCE,MAAM,CAAGC,KAAK,CAACD,MAAM,CAAET,MAAM,CAACS,MAAM,CAAC,CACrCN,OAAO,CAAGO,KAAK,CAACP,OAAO,CAAEH,MAAM,CAACO,KAAK,CAAC,CACtCF,OAAO,CAAGK,KAAK,CAACL,OAAO,CAAEL,MAAM,CAACS,MAAM,CAAC,CAGvCF,KAAK,CAAGM,IAAI,CAACC,GAAG,CAACX,OAAO,CAAGI,KAAK,CAAEP,MAAM,CAACO,KAAK,CAAC,CAAGJ,OAAO,CACzDM,MAAM,CAAGI,IAAI,CAACC,GAAG,CAACT,OAAO,CAAGI,MAAM,CAAET,MAAM,CAACS,MAAM,CAAC,CAAGJ,OAAO,CAE5D,GAAIE,KAAK,GAAK,CAAC,EAAIE,MAAM,GAAK,CAAC,CAAE,CAC/B,KAAM,IAAI,CAAAX,UAAU,CAClB,4BAA4B,CAC5B,oCAAoC,CAAGiB,IAAI,CAACC,SAAS,CAACf,OAAO,CAAE,IAAI,CAAE,CAAC,CAAC,CACxE,C,CAGH,GAAM,CAAAgB,MAAM,CAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/CF,MAAM,CAACV,KAAK,CAAGA,KAAK,CACpBU,MAAM,CAACR,MAAM,CAAGA,MAAM,CAEtB,GAAM,CAAAW,OAAO,CAAGrB,UAAU,CAACkB,MAAM,CAAC,CAClCG,OAAO,CAACC,SAAS,CAACrB,MAAM,CAAEG,OAAO,CAAEE,OAAO,CAAEE,KAAK,CAAEE,MAAM,CAAE,CAAC,CAAE,CAAC,CAAEF,KAAK,CAAEE,MAAM,CAAC,CAE/E,MAAO,CAAAQ,MAAM,CACf,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}