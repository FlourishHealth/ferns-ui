{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LogBoxMessage = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar react_native_1 = require(\"react-native-web/dist/index\");\nvar cleanContent = function cleanContent(content) {\n  return content.replace(/^(TransformError |Warning: (Warning: )?|Error: )/g, '');\n};\nfunction LogBoxMessage(props) {\n  var _props$message = props.message,\n    content = _props$message.content,\n    substitutions = _props$message.substitutions;\n  if (props.plaintext === true) {\n    return react_1.default.createElement(react_native_1.Text, null, cleanContent(content));\n  }\n  var maxLength = props.maxLength != null ? props.maxLength : Infinity;\n  var substitutionStyle = props.style;\n  var elements = [];\n  var length = 0;\n  var createUnderLength = function createUnderLength(key, message, style) {\n    var cleanMessage = cleanContent(message);\n    if (props.maxLength != null) {\n      cleanMessage = cleanMessage.slice(0, props.maxLength - length);\n    }\n    if (length < maxLength) {\n      elements.push(react_1.default.createElement(react_native_1.Text, {\n        key: key,\n        style: style\n      }, cleanMessage));\n    }\n    length += cleanMessage.length;\n  };\n  var lastOffset = substitutions.reduce(function (prevOffset, substitution, index) {\n    var key = String(index);\n    if (substitution.offset > prevOffset) {\n      var prevPart = content.substr(prevOffset, substitution.offset - prevOffset);\n      createUnderLength(key, prevPart);\n    }\n    var substititionPart = content.substr(substitution.offset, substitution.length);\n    createUnderLength(key + '.5', substititionPart, substitutionStyle);\n    return substitution.offset + substitution.length;\n  }, 0);\n  if (lastOffset < content.length) {\n    var lastPart = content.substr(lastOffset);\n    createUnderLength('-1', lastPart);\n  }\n  return react_1.default.createElement(react_1.default.Fragment, null, elements);\n}\nexports.LogBoxMessage = LogBoxMessage;","map":{"version":3,"names":["react_1","__importDefault","require","react_native_1","cleanContent","content","replace","LogBoxMessage","props","_props$message","message","substitutions","plaintext","default","createElement","Text","maxLength","Infinity","substitutionStyle","style","elements","length","createUnderLength","key","cleanMessage","slice","push","lastOffset","reduce","prevOffset","substitution","index","String","offset","prevPart","substr","substititionPart","lastPart","Fragment","exports"],"sources":["/Users/josh/src/ui/apps/old-demo/node_modules/@expo/metro-runtime/src/error-overlay/UI/LogBoxMessage.tsx"],"sourcesContent":["/**\n * Copyright (c) 650 Industries.\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport { StyleProp, Text, TextStyle } from 'react-native';\n\nimport type { Message } from '../Data/parseLogBoxLog';\n\ntype Props = {\n  message: Message;\n  style: StyleProp<TextStyle>;\n  plaintext?: boolean;\n  maxLength?: number;\n};\n\nconst cleanContent = (content: string) =>\n  content.replace(/^(TransformError |Warning: (Warning: )?|Error: )/g, '');\n\nexport function LogBoxMessage(props: Props): JSX.Element {\n  const { content, substitutions }: Message = props.message;\n\n  if (props.plaintext === true) {\n    return <Text>{cleanContent(content)}</Text>;\n  }\n\n  const maxLength = props.maxLength != null ? props.maxLength : Infinity;\n  const substitutionStyle: StyleProp<TextStyle> = props.style;\n  const elements: JSX.Element[] = [];\n  let length = 0;\n  const createUnderLength = (key: string | '-1', message: string, style?: StyleProp<TextStyle>) => {\n    let cleanMessage = cleanContent(message);\n\n    if (props.maxLength != null) {\n      cleanMessage = cleanMessage.slice(0, props.maxLength - length);\n    }\n\n    if (length < maxLength) {\n      elements.push(\n        <Text key={key} style={style}>\n          {cleanMessage}\n        </Text>\n      );\n    }\n\n    length += cleanMessage.length;\n  };\n\n  const lastOffset = substitutions.reduce((prevOffset, substitution, index) => {\n    const key = String(index);\n\n    if (substitution.offset > prevOffset) {\n      const prevPart = content.substr(prevOffset, substitution.offset - prevOffset);\n\n      createUnderLength(key, prevPart);\n    }\n\n    const substititionPart = content.substr(substitution.offset, substitution.length);\n\n    createUnderLength(key + '.5', substititionPart, substitutionStyle);\n    return substitution.offset + substitution.length;\n  }, 0);\n\n  if (lastOffset < content.length) {\n    const lastPart = content.substr(lastOffset);\n    createUnderLength('-1', lastPart);\n  }\n\n  return <>{elements}</>;\n}\n"],"mappings":";;;;;;;;;;;AAOA,IAAAA,OAAA,GAAAC,eAAA,CAAAC,OAAA;AAA0B,IAAAC,cAAA,GAAAD,OAAA;AAY1B,IAAME,YAAY,GAAG,SAAfA,YAAYA,CAAIC,OAAe;EAAA,OACnCA,OAAO,CAACC,OAAO,CAAC,mDAAmD,EAAE,EAAE,CAAC;AAAA;AAE1E,SAAgBC,aAAaA,CAACC,KAAY;EACxC,IAAAC,cAAA,GAA4CD,KAAK,CAACE,OAAO;IAAjDL,OAAO,GAAAI,cAAA,CAAPJ,OAAO;IAAEM,aAAa,GAAAF,cAAA,CAAbE,aAAa;EAE9B,IAAIH,KAAK,CAACI,SAAS,KAAK,IAAI,EAAE;IAC5B,OAAOZ,OAAA,CAAAa,OAAA,CAAAC,aAAA,CAACX,cAAA,CAAAY,IAAI,QAAEX,YAAY,CAACC,OAAO,CAAC,CAAQ;;EAG7C,IAAMW,SAAS,GAAGR,KAAK,CAACQ,SAAS,IAAI,IAAI,GAAGR,KAAK,CAACQ,SAAS,GAAGC,QAAQ;EACtE,IAAMC,iBAAiB,GAAyBV,KAAK,CAACW,KAAK;EAC3D,IAAMC,QAAQ,GAAkB,EAAE;EAClC,IAAIC,MAAM,GAAG,CAAC;EACd,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIC,GAAkB,EAAEb,OAAe,EAAES,KAA4B,EAAI;IAC9F,IAAIK,YAAY,GAAGpB,YAAY,CAACM,OAAO,CAAC;IAExC,IAAIF,KAAK,CAACQ,SAAS,IAAI,IAAI,EAAE;MAC3BQ,YAAY,GAAGA,YAAY,CAACC,KAAK,CAAC,CAAC,EAAEjB,KAAK,CAACQ,SAAS,GAAGK,MAAM,CAAC;;IAGhE,IAAIA,MAAM,GAAGL,SAAS,EAAE;MACtBI,QAAQ,CAACM,IAAI,CACX1B,OAAA,CAAAa,OAAA,CAAAC,aAAA,CAACX,cAAA,CAAAY,IAAI;QAACQ,GAAG,EAAEA,GAAG;QAAEJ,KAAK,EAAEA;MAAK,GACzBK,YAAY,CACR,CACR;;IAGHH,MAAM,IAAIG,YAAY,CAACH,MAAM;EAC/B,CAAC;EAED,IAAMM,UAAU,GAAGhB,aAAa,CAACiB,MAAM,CAAC,UAACC,UAAU,EAAEC,YAAY,EAAEC,KAAK,EAAI;IAC1E,IAAMR,GAAG,GAAGS,MAAM,CAACD,KAAK,CAAC;IAEzB,IAAID,YAAY,CAACG,MAAM,GAAGJ,UAAU,EAAE;MACpC,IAAMK,QAAQ,GAAG7B,OAAO,CAAC8B,MAAM,CAACN,UAAU,EAAEC,YAAY,CAACG,MAAM,GAAGJ,UAAU,CAAC;MAE7EP,iBAAiB,CAACC,GAAG,EAAEW,QAAQ,CAAC;;IAGlC,IAAME,gBAAgB,GAAG/B,OAAO,CAAC8B,MAAM,CAACL,YAAY,CAACG,MAAM,EAAEH,YAAY,CAACT,MAAM,CAAC;IAEjFC,iBAAiB,CAACC,GAAG,GAAG,IAAI,EAAEa,gBAAgB,EAAElB,iBAAiB,CAAC;IAClE,OAAOY,YAAY,CAACG,MAAM,GAAGH,YAAY,CAACT,MAAM;EAClD,CAAC,EAAE,CAAC,CAAC;EAEL,IAAIM,UAAU,GAAGtB,OAAO,CAACgB,MAAM,EAAE;IAC/B,IAAMgB,QAAQ,GAAGhC,OAAO,CAAC8B,MAAM,CAACR,UAAU,CAAC;IAC3CL,iBAAiB,CAAC,IAAI,EAAEe,QAAQ,CAAC;;EAGnC,OAAOrC,OAAA,CAAAa,OAAA,CAAAC,aAAA,CAAAd,OAAA,CAAAa,OAAA,CAAAyB,QAAA,QAAGlB,QAAQ,CAAI;AACxB;AAlDAmB,OAAA,CAAAhC,aAAA,GAAAA,aAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}