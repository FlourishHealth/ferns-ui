{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ErrorToastContainer = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar react_native_1 = require(\"react-native-web/dist/index\");\nvar ErrorToast_1 = require(\"./ErrorToast\");\nvar LogBoxData = __importStar(require(\"../Data/LogBoxData\"));\nvar LogContext_1 = require(\"../Data/LogContext\");\nvar useRejectionHandler_1 = require(\"../useRejectionHandler\");\nfunction ErrorToastContainer() {\n  (0, useRejectionHandler_1.useRejectionHandler)();\n  var _ref = (0, LogContext_1.useLogs)(),\n    logs = _ref.logs,\n    isDisabled = _ref.isDisabled;\n  if (!logs.length || isDisabled) {\n    return null;\n  }\n  return react_1.default.createElement(ErrorToastStack, {\n    logs: logs\n  });\n}\nexports.ErrorToastContainer = ErrorToastContainer;\nfunction ErrorToastStack(_ref2) {\n  var logs = _ref2.logs;\n  var onDismissWarns = (0, react_1.useCallback)(function () {\n    LogBoxData.clearWarnings();\n  }, []);\n  var onDismissErrors = (0, react_1.useCallback)(function () {\n    LogBoxData.clearErrors();\n  }, []);\n  var setSelectedLog = (0, react_1.useCallback)(function (index) {\n    LogBoxData.setSelectedLog(index);\n  }, []);\n  function openLog(log) {\n    var index = logs.length - 1;\n    while (index > 0 && logs[index] !== log) {\n      index -= 1;\n    }\n    setSelectedLog(index);\n  }\n  var warnings = (0, react_1.useMemo)(function () {\n    return logs.filter(function (log) {\n      return log.level === 'warn';\n    });\n  }, [logs]);\n  var errors = (0, react_1.useMemo)(function () {\n    return logs.filter(function (log) {\n      return log.level === 'error' || log.level === 'fatal';\n    });\n  }, [logs]);\n  return react_1.default.createElement(react_native_1.View, {\n    style: styles.list\n  }, warnings.length > 0 && react_1.default.createElement(ErrorToast_1.ErrorToast, {\n    log: warnings[warnings.length - 1],\n    level: \"warn\",\n    totalLogCount: warnings.length,\n    onPressOpen: function onPressOpen() {\n      return openLog(warnings[warnings.length - 1]);\n    },\n    onPressDismiss: onDismissWarns\n  }), errors.length > 0 && react_1.default.createElement(ErrorToast_1.ErrorToast, {\n    log: errors[errors.length - 1],\n    level: \"error\",\n    totalLogCount: errors.length,\n    onPressOpen: function onPressOpen() {\n      return openLog(errors[errors.length - 1]);\n    },\n    onPressDismiss: onDismissErrors\n  }));\n}\nvar styles = react_native_1.StyleSheet.create({\n  list: {\n    bottom: 6,\n    left: 10,\n    right: 10,\n    maxWidth: 320,\n    position: 'fixed'\n  }\n});\nexports.default = LogBoxData.withSubscription(ErrorToastContainer);","map":{"version":3,"names":["react_1","__importStar","require","react_native_1","ErrorToast_1","LogBoxData","LogContext_1","useRejectionHandler_1","ErrorToastContainer","useRejectionHandler","_ref","useLogs","logs","isDisabled","length","default","createElement","ErrorToastStack","exports","_ref2","onDismissWarns","useCallback","clearWarnings","onDismissErrors","clearErrors","setSelectedLog","index","openLog","log","warnings","useMemo","filter","level","errors","View","style","styles","list","ErrorToast","totalLogCount","onPressOpen","onPressDismiss","StyleSheet","create","bottom","left","right","maxWidth","position","withSubscription"],"sources":["/Users/josh/src/ui/apps/old-demo/node_modules/@expo/metro-runtime/src/error-overlay/toast/ErrorToastContainer.web.tsx"],"sourcesContent":["/**\n * Copyright (c) 650 Industries.\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React, { useCallback, useMemo } from 'react';\nimport { StyleSheet, View } from 'react-native';\n\nimport { ErrorToast } from './ErrorToast';\nimport * as LogBoxData from '../Data/LogBoxData';\nimport { LogBoxLog } from '../Data/LogBoxLog';\nimport { useLogs } from '../Data/LogContext';\nimport { useRejectionHandler } from '../useRejectionHandler';\n\nexport function ErrorToastContainer() {\n  useRejectionHandler();\n  const { logs, isDisabled } = useLogs();\n  if (!logs.length || isDisabled) {\n    return null;\n  }\n  return <ErrorToastStack logs={logs} />;\n}\n\nfunction ErrorToastStack({ logs }: { logs: LogBoxLog[] }) {\n  const onDismissWarns = useCallback(() => {\n    LogBoxData.clearWarnings();\n  }, []);\n\n  const onDismissErrors = useCallback(() => {\n    LogBoxData.clearErrors();\n  }, []);\n\n  const setSelectedLog = useCallback((index: number): void => {\n    LogBoxData.setSelectedLog(index);\n  }, []);\n\n  function openLog(log: LogBoxLog) {\n    let index = logs.length - 1;\n\n    // Stop at zero because if we don't find any log, we'll open the first log.\n    while (index > 0 && logs[index] !== log) {\n      index -= 1;\n    }\n    setSelectedLog(index);\n  }\n\n  const warnings = useMemo(() => logs.filter((log) => log.level === 'warn'), [logs]);\n\n  const errors = useMemo(\n    () => logs.filter((log) => log.level === 'error' || log.level === 'fatal'),\n    [logs]\n  );\n\n  return (\n    <View style={styles.list}>\n      {warnings.length > 0 && (\n        <ErrorToast\n          log={warnings[warnings.length - 1]}\n          level=\"warn\"\n          totalLogCount={warnings.length}\n          onPressOpen={() => openLog(warnings[warnings.length - 1])}\n          onPressDismiss={onDismissWarns}\n        />\n      )}\n\n      {errors.length > 0 && (\n        <ErrorToast\n          log={errors[errors.length - 1]}\n          level=\"error\"\n          totalLogCount={errors.length}\n          onPressOpen={() => openLog(errors[errors.length - 1])}\n          onPressDismiss={onDismissErrors}\n        />\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  list: {\n    bottom: 6,\n    left: 10,\n    right: 10,\n    maxWidth: 320,\n    // @ts-expect-error\n    position: 'fixed',\n  },\n});\n\nexport default LogBoxData.withSubscription(ErrorToastContainer);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}