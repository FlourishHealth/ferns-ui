{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useRejectionHandler = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar ExceptionsManager_1 = __importDefault(require(\"./modules/ExceptionsManager\"));\nfunction useStackTraceLimit(limit) {\n  var current = react_1.default.useRef(0);\n  react_1.default.useEffect(function () {\n    try {\n      var currentLimit = Error.stackTraceLimit;\n      Error.stackTraceLimit = limit;\n      current.current = currentLimit;\n    } catch (_unused) {}\n    return function () {\n      try {\n        Error.stackTraceLimit = current.current;\n      } catch (_unused2) {}\n    };\n  }, [limit]);\n}\nfunction useRejectionHandler() {\n  var hasError = react_1.default.useRef(false);\n  useStackTraceLimit(35);\n  react_1.default.useEffect(function () {\n    function onUnhandledError(ev) {\n      hasError.current = true;\n      var error = ev == null ? void 0 : ev.error;\n      if (!error || !(error instanceof Error) || typeof error.stack !== 'string') {\n        return;\n      }\n      ExceptionsManager_1.default.handleException(error);\n    }\n    function onUnhandledRejection(ev) {\n      hasError.current = true;\n      var reason = ev == null ? void 0 : ev.reason;\n      if (!reason || !(reason instanceof Error) || typeof reason.stack !== 'string') {\n        return;\n      }\n      ExceptionsManager_1.default.handleException(reason);\n    }\n    window.addEventListener('unhandledrejection', onUnhandledRejection);\n    window.addEventListener('error', onUnhandledError);\n    return function () {\n      window.removeEventListener('error', onUnhandledError);\n      window.removeEventListener('unhandledrejection', onUnhandledRejection);\n    };\n  }, []);\n  return hasError;\n}\nexports.useRejectionHandler = useRejectionHandler;","map":{"version":3,"names":["react_1","__importDefault","require","ExceptionsManager_1","useStackTraceLimit","limit","current","default","useRef","useEffect","currentLimit","Error","stackTraceLimit","_unused","_unused2","useRejectionHandler","hasError","onUnhandledError","ev","error","stack","handleException","onUnhandledRejection","reason","window","addEventListener","removeEventListener","exports"],"sources":["/Users/josh/src/ui/apps/demo/node_modules/@expo/metro-runtime/src/error-overlay/useRejectionHandler.ts"],"sourcesContent":["import React from 'react';\n\nimport ExceptionsManager from './modules/ExceptionsManager';\n\nfunction useStackTraceLimit(limit: number) {\n  const current = React.useRef(0);\n  React.useEffect(() => {\n    try {\n      // @ts-expect-error: StackTraceLimit is not defined in the Error type\n      const currentLimit = Error.stackTraceLimit;\n      // @ts-expect-error: StackTraceLimit is not defined in the Error type\n      Error.stackTraceLimit = limit;\n      current.current = currentLimit;\n    } catch {}\n    return () => {\n      try {\n        // @ts-expect-error: StackTraceLimit is not defined in the Error type\n        Error.stackTraceLimit = current.current;\n      } catch {}\n    };\n  }, [limit]);\n}\n\nexport function useRejectionHandler() {\n  const hasError = React.useRef(false);\n\n  useStackTraceLimit(35);\n\n  React.useEffect(() => {\n    function onUnhandledError(ev: ErrorEvent) {\n      hasError.current = true;\n\n      const error = ev?.error;\n      if (!error || !(error instanceof Error) || typeof error.stack !== 'string') {\n        return;\n      }\n\n      ExceptionsManager.handleException(error);\n    }\n\n    function onUnhandledRejection(ev: PromiseRejectionEvent) {\n      hasError.current = true;\n\n      const reason = ev?.reason;\n      if (!reason || !(reason instanceof Error) || typeof reason.stack !== 'string') {\n        return;\n      }\n\n      ExceptionsManager.handleException(reason);\n    }\n\n    window.addEventListener('unhandledrejection', onUnhandledRejection);\n    window.addEventListener('error', onUnhandledError);\n    return () => {\n      window.removeEventListener('error', onUnhandledError);\n      window.removeEventListener('unhandledrejection', onUnhandledRejection);\n    };\n  }, []);\n\n  return hasError;\n}\n"],"mappings":";;;;;;;;;;;AAAA,IAAAA,OAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,IAAAC,mBAAA,GAAAF,eAAA,CAAAC,OAAA;AAEA,SAASE,kBAAkBA,CAACC,KAAa;EACvC,IAAMC,OAAO,GAAGN,OAAA,CAAAO,OAAK,CAACC,MAAM,CAAC,CAAC,CAAC;EAC/BR,OAAA,CAAAO,OAAK,CAACE,SAAS,CAAC,YAAK;IACnB,IAAI;MAEF,IAAMC,YAAY,GAAGC,KAAK,CAACC,eAAe;MAE1CD,KAAK,CAACC,eAAe,GAAGP,KAAK;MAC7BC,OAAO,CAACA,OAAO,GAAGI,YAAY;KAC/B,CAAC,OAAAG,OAAA,EAAM;IACR,OAAO,YAAK;MACV,IAAI;QAEFF,KAAK,CAACC,eAAe,GAAGN,OAAO,CAACA,OAAO;OACxC,CAAC,OAAAQ,QAAA,EAAM;IACV,CAAC;EACH,CAAC,EAAE,CAACT,KAAK,CAAC,CAAC;AACb;AAEA,SAAgBU,mBAAmBA,CAAA;EACjC,IAAMC,QAAQ,GAAGhB,OAAA,CAAAO,OAAK,CAACC,MAAM,CAAC,KAAK,CAAC;EAEpCJ,kBAAkB,CAAC,EAAE,CAAC;EAEtBJ,OAAA,CAAAO,OAAK,CAACE,SAAS,CAAC,YAAK;IACnB,SAASQ,gBAAgBA,CAACC,EAAc;MACtCF,QAAQ,CAACV,OAAO,GAAG,IAAI;MAEvB,IAAMa,KAAK,GAAGD,EAAE,oBAAFA,EAAE,CAAEC,KAAK;MACvB,IAAI,CAACA,KAAK,IAAI,EAAEA,KAAK,YAAYR,KAAK,CAAC,IAAI,OAAOQ,KAAK,CAACC,KAAK,KAAK,QAAQ,EAAE;QAC1E;;MAGFjB,mBAAA,CAAAI,OAAiB,CAACc,eAAe,CAACF,KAAK,CAAC;IAC1C;IAEA,SAASG,oBAAoBA,CAACJ,EAAyB;MACrDF,QAAQ,CAACV,OAAO,GAAG,IAAI;MAEvB,IAAMiB,MAAM,GAAGL,EAAE,oBAAFA,EAAE,CAAEK,MAAM;MACzB,IAAI,CAACA,MAAM,IAAI,EAAEA,MAAM,YAAYZ,KAAK,CAAC,IAAI,OAAOY,MAAM,CAACH,KAAK,KAAK,QAAQ,EAAE;QAC7E;;MAGFjB,mBAAA,CAAAI,OAAiB,CAACc,eAAe,CAACE,MAAM,CAAC;IAC3C;IAEAC,MAAM,CAACC,gBAAgB,CAAC,oBAAoB,EAAEH,oBAAoB,CAAC;IACnEE,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAER,gBAAgB,CAAC;IAClD,OAAO,YAAK;MACVO,MAAM,CAACE,mBAAmB,CAAC,OAAO,EAAET,gBAAgB,CAAC;MACrDO,MAAM,CAACE,mBAAmB,CAAC,oBAAoB,EAAEJ,oBAAoB,CAAC;IACxE,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAON,QAAQ;AACjB;AArCAW,OAAA,CAAAZ,mBAAA,GAAAA,mBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}