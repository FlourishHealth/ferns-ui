{"ast":null,"code":"import { CodedError } from 'expo-modules-core';\nimport { getContext } from '../utils/getContext.web';\nexport default (function (canvas, options) {\n  var _options$originX = options.originX,\n    originX = _options$originX === void 0 ? 0 : _options$originX,\n    _options$originY = options.originY,\n    originY = _options$originY === void 0 ? 0 : _options$originY,\n    _options$width = options.width,\n    width = _options$width === void 0 ? 0 : _options$width,\n    _options$height = options.height,\n    height = _options$height === void 0 ? 0 : _options$height;\n  var clamp = function clamp(value, max) {\n    return Math.max(0, Math.min(max, value));\n  };\n  width = clamp(width, canvas.width);\n  height = clamp(height, canvas.height);\n  originX = clamp(originX, canvas.width);\n  originY = clamp(originY, canvas.height);\n  width = Math.min(originX + width, canvas.width) - originX;\n  height = Math.min(originY + height, canvas.height) - originY;\n  if (width === 0 || height === 0) {\n    throw new CodedError('ERR_IMAGE_MANIPULATOR_CROP', 'Crop size must be greater than 0: ' + JSON.stringify(options, null, 2));\n  }\n  var result = document.createElement('canvas');\n  result.width = width;\n  result.height = height;\n  var context = getContext(result);\n  context.drawImage(canvas, originX, originY, width, height, 0, 0, width, height);\n  return result;\n});","map":{"version":3,"names":["CodedError","getContext","canvas","options","_options$originX","originX","_options$originY","originY","_options$width","width","_options$height","height","clamp","value","max","Math","min","JSON","stringify","result","document","createElement","context","drawImage"],"sources":["/Users/josh/src/ui/apps/demo/node_modules/expo-image-manipulator/src/actions/CropAction.web.ts"],"sourcesContent":["import { CodedError } from 'expo-modules-core';\n\nimport { ActionCrop } from '../ImageManipulator.types';\nimport { getContext } from '../utils/getContext.web';\n\nexport default (canvas: HTMLCanvasElement, options: ActionCrop['crop']) => {\n  // ensure values are defined.\n  let { originX = 0, originY = 0, width = 0, height = 0 } = options;\n  const clamp = (value, max) => Math.max(0, Math.min(max, value));\n  // lock within bounds.\n  width = clamp(width, canvas.width);\n  height = clamp(height, canvas.height);\n  originX = clamp(originX, canvas.width);\n  originY = clamp(originY, canvas.height);\n\n  // lock sum of crop.\n  width = Math.min(originX + width, canvas.width) - originX;\n  height = Math.min(originY + height, canvas.height) - originY;\n\n  if (width === 0 || height === 0) {\n    throw new CodedError(\n      'ERR_IMAGE_MANIPULATOR_CROP',\n      'Crop size must be greater than 0: ' + JSON.stringify(options, null, 2)\n    );\n  }\n\n  const result = document.createElement('canvas');\n  result.width = width;\n  result.height = height;\n\n  const context = getContext(result);\n  context.drawImage(canvas, originX, originY, width, height, 0, 0, width, height);\n\n  return result;\n};\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,mBAAmB;AAG9C,SAASC,UAAU,QAAQ,yBAAyB;AAEpD,gBAAe,UAACC,MAAyB,EAAEC,OAA2B,EAAI;EAExE,IAAAC,gBAAA,GAA0DD,OAAO,CAA3DE,OAAO;IAAPA,OAAO,GAAAD,gBAAA,cAAG,CAAC,GAAAA,gBAAA;IAAAE,gBAAA,GAAyCH,OAAO,CAA9CI,OAAO;IAAPA,OAAO,GAAAD,gBAAA,cAAG,CAAC,GAAAA,gBAAA;IAAAE,cAAA,GAA4BL,OAAO,CAAjCM,KAAK;IAALA,KAAK,GAAAD,cAAA,cAAG,CAAC,GAAAA,cAAA;IAAAE,eAAA,GAAiBP,OAAO,CAAtBQ,MAAM;IAANA,MAAM,GAAAD,eAAA,cAAG,CAAC,GAAAA,eAAA;EACrD,IAAME,KAAK,GAAG,SAARA,KAAKA,CAAIC,KAAK,EAAEC,GAAG;IAAA,OAAKC,IAAI,CAACD,GAAG,CAAC,CAAC,EAAEC,IAAI,CAACC,GAAG,CAACF,GAAG,EAAED,KAAK,CAAC,CAAC;EAAA;EAE/DJ,KAAK,GAAGG,KAAK,CAACH,KAAK,EAAEP,MAAM,CAACO,KAAK,CAAC;EAClCE,MAAM,GAAGC,KAAK,CAACD,MAAM,EAAET,MAAM,CAACS,MAAM,CAAC;EACrCN,OAAO,GAAGO,KAAK,CAACP,OAAO,EAAEH,MAAM,CAACO,KAAK,CAAC;EACtCF,OAAO,GAAGK,KAAK,CAACL,OAAO,EAAEL,MAAM,CAACS,MAAM,CAAC;EAGvCF,KAAK,GAAGM,IAAI,CAACC,GAAG,CAACX,OAAO,GAAGI,KAAK,EAAEP,MAAM,CAACO,KAAK,CAAC,GAAGJ,OAAO;EACzDM,MAAM,GAAGI,IAAI,CAACC,GAAG,CAACT,OAAO,GAAGI,MAAM,EAAET,MAAM,CAACS,MAAM,CAAC,GAAGJ,OAAO;EAE5D,IAAIE,KAAK,KAAK,CAAC,IAAIE,MAAM,KAAK,CAAC,EAAE;IAC/B,MAAM,IAAIX,UAAU,CAClB,4BAA4B,EAC5B,oCAAoC,GAAGiB,IAAI,CAACC,SAAS,CAACf,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CACxE;;EAGH,IAAMgB,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EAC/CF,MAAM,CAACV,KAAK,GAAGA,KAAK;EACpBU,MAAM,CAACR,MAAM,GAAGA,MAAM;EAEtB,IAAMW,OAAO,GAAGrB,UAAU,CAACkB,MAAM,CAAC;EAClCG,OAAO,CAACC,SAAS,CAACrB,MAAM,EAAEG,OAAO,EAAEE,OAAO,EAAEE,KAAK,EAAEE,MAAM,EAAE,CAAC,EAAE,CAAC,EAAEF,KAAK,EAAEE,MAAM,CAAC;EAE/E,OAAOQ,MAAM;AACf,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}