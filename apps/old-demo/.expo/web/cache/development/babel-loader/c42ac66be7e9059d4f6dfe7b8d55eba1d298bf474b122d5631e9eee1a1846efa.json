{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resolveParentId = exports.useNavigation = void 0;\nvar native_1 = require(\"@react-navigation/native\");\nvar react_1 = __importDefault(require(\"react\"));\nvar Route_1 = require(\"./Route\");\nvar matchers_1 = require(\"./matchers\");\nfunction useNavigation(parent) {\n  var navigation = (0, native_1.useNavigation)();\n  var contextKey = (0, Route_1.useContextKey)();\n  var normalizedParent = react_1.default.useMemo(function () {\n    if (!parent) {\n      return null;\n    }\n    var normalized = (0, matchers_1.getNameFromFilePath)(parent);\n    if (parent.startsWith('.')) {\n      return relativePaths(contextKey, parent);\n    }\n    return normalized;\n  }, [contextKey, parent]);\n  if (normalizedParent != null) {\n    var parentNavigation = navigation.getParent(normalizedParent);\n    if (!parentNavigation) {\n      throw new Error(`Could not find parent navigation with route \"${parent}\".` + (normalizedParent !== parent ? ` (normalized: ${normalizedParent})` : ''));\n    }\n    return parentNavigation;\n  }\n  return navigation;\n}\nexports.useNavigation = useNavigation;\nfunction resolveParentId(contextKey, parentId) {\n  if (!parentId) {\n    return null;\n  }\n  if (parentId.startsWith('.')) {\n    return (0, matchers_1.getNameFromFilePath)(relativePaths(contextKey, parentId));\n  }\n  return (0, matchers_1.getNameFromFilePath)(parentId);\n}\nexports.resolveParentId = resolveParentId;\nfunction relativePaths(from, to) {\n  var fromParts = from.split('/').filter(Boolean);\n  var toParts = to.split('/').filter(Boolean);\n  for (var part of toParts) {\n    if (part === '..') {\n      if (fromParts.length === 0) {\n        throw new Error(`Cannot resolve path \"${to}\" relative to \"${from}\"`);\n      }\n      fromParts.pop();\n    } else if (part === '.') {} else {\n      fromParts.push(part);\n    }\n  }\n  return '/' + fromParts.join('/');\n}","map":{"version":3,"names":["native_1","require","react_1","__importDefault","Route_1","matchers_1","useNavigation","parent","navigation","contextKey","useContextKey","normalizedParent","default","useMemo","normalized","getNameFromFilePath","startsWith","relativePaths","parentNavigation","getParent","Error","exports","resolveParentId","parentId","from","to","fromParts","split","filter","Boolean","toParts","part","length","pop","push","join"],"sources":["/Users/josh/src/ui/apps/demo/node_modules/expo-router/src/useNavigation.ts"],"sourcesContent":["import { useNavigation as useUpstreamNavigation, NavigationProp } from '@react-navigation/native';\nimport React from 'react';\n\nimport { useContextKey } from './Route';\nimport { getNameFromFilePath } from './matchers';\n\n/**\n * Return the navigation object for the current route.\n * @param parent Provide an absolute path like `/(root)` to the parent route or a relative path like `../../` to the parent route.\n * @returns the navigation object for the provided route.\n */\nexport function useNavigation<T = NavigationProp<ReactNavigation.RootParamList>>(\n  parent?: string\n): T {\n  const navigation = useUpstreamNavigation<any>();\n\n  const contextKey = useContextKey();\n  const normalizedParent = React.useMemo(() => {\n    if (!parent) {\n      return null;\n    }\n    const normalized = getNameFromFilePath(parent);\n\n    if (parent.startsWith('.')) {\n      return relativePaths(contextKey, parent);\n    }\n    return normalized;\n  }, [contextKey, parent]);\n\n  if (normalizedParent != null) {\n    const parentNavigation = navigation.getParent(normalizedParent);\n\n    // TODO: Maybe print a list of parents...\n\n    if (!parentNavigation) {\n      throw new Error(\n        `Could not find parent navigation with route \"${parent}\".` +\n          (normalizedParent !== parent ? ` (normalized: ${normalizedParent})` : '')\n      );\n    }\n    return parentNavigation;\n  }\n  return navigation;\n}\n\nexport function resolveParentId(contextKey: string, parentId?: string | null): string | null {\n  if (!parentId) {\n    return null;\n  }\n\n  if (parentId.startsWith('.')) {\n    return getNameFromFilePath(relativePaths(contextKey, parentId));\n  }\n  return getNameFromFilePath(parentId);\n}\n\n// Resolve a path like `../` relative to a path like `/foo/bar`\nfunction relativePaths(from: string, to: string): string {\n  const fromParts = from.split('/').filter(Boolean);\n  const toParts = to.split('/').filter(Boolean);\n\n  for (const part of toParts) {\n    if (part === '..') {\n      if (fromParts.length === 0) {\n        throw new Error(`Cannot resolve path \"${to}\" relative to \"${from}\"`);\n      }\n      fromParts.pop();\n    } else if (part === '.') {\n      // Ignore\n    } else {\n      fromParts.push(part);\n    }\n  }\n\n  return '/' + fromParts.join('/');\n}\n"],"mappings":";;;;;;;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAC,eAAA,CAAAF,OAAA;AAEA,IAAAG,OAAA,GAAAH,OAAA;AACA,IAAAI,UAAA,GAAAJ,OAAA;AAOA,SAAgBK,aAAaA,CAC3BC,MAAe;EAEf,IAAMC,UAAU,GAAG,IAAAR,QAAA,CAAAM,aAAqB,GAAO;EAE/C,IAAMG,UAAU,GAAG,IAAAL,OAAA,CAAAM,aAAa,GAAE;EAClC,IAAMC,gBAAgB,GAAGT,OAAA,CAAAU,OAAK,CAACC,OAAO,CAAC,YAAK;IAC1C,IAAI,CAACN,MAAM,EAAE;MACX,OAAO,IAAI;;IAEb,IAAMO,UAAU,GAAG,IAAAT,UAAA,CAAAU,mBAAmB,EAACR,MAAM,CAAC;IAE9C,IAAIA,MAAM,CAACS,UAAU,CAAC,GAAG,CAAC,EAAE;MAC1B,OAAOC,aAAa,CAACR,UAAU,EAAEF,MAAM,CAAC;;IAE1C,OAAOO,UAAU;EACnB,CAAC,EAAE,CAACL,UAAU,EAAEF,MAAM,CAAC,CAAC;EAExB,IAAII,gBAAgB,IAAI,IAAI,EAAE;IAC5B,IAAMO,gBAAgB,GAAGV,UAAU,CAACW,SAAS,CAACR,gBAAgB,CAAC;IAI/D,IAAI,CAACO,gBAAgB,EAAE;MACrB,MAAM,IAAIE,KAAK,CACb,gDAAgDb,MAAM,IAAI,IACvDI,gBAAgB,KAAKJ,MAAM,GAAG,iBAAiBI,gBAAgB,GAAG,GAAG,EAAE,CAAC,CAC5E;;IAEH,OAAOO,gBAAgB;;EAEzB,OAAOV,UAAU;AACnB;AAhCAa,OAAA,CAAAf,aAAA,GAAAA,aAAA;AAkCA,SAAgBgB,eAAeA,CAACb,UAAkB,EAAEc,QAAwB;EAC1E,IAAI,CAACA,QAAQ,EAAE;IACb,OAAO,IAAI;;EAGb,IAAIA,QAAQ,CAACP,UAAU,CAAC,GAAG,CAAC,EAAE;IAC5B,OAAO,IAAAX,UAAA,CAAAU,mBAAmB,EAACE,aAAa,CAACR,UAAU,EAAEc,QAAQ,CAAC,CAAC;;EAEjE,OAAO,IAAAlB,UAAA,CAAAU,mBAAmB,EAACQ,QAAQ,CAAC;AACtC;AATAF,OAAA,CAAAC,eAAA,GAAAA,eAAA;AAYA,SAASL,aAAaA,CAACO,IAAY,EAAEC,EAAU;EAC7C,IAAMC,SAAS,GAAGF,IAAI,CAACG,KAAK,CAAC,GAAG,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC;EACjD,IAAMC,OAAO,GAAGL,EAAE,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC;EAE7C,KAAK,IAAME,IAAI,IAAID,OAAO,EAAE;IAC1B,IAAIC,IAAI,KAAK,IAAI,EAAE;MACjB,IAAIL,SAAS,CAACM,MAAM,KAAK,CAAC,EAAE;QAC1B,MAAM,IAAIZ,KAAK,CAAC,wBAAwBK,EAAE,kBAAkBD,IAAI,GAAG,CAAC;;MAEtEE,SAAS,CAACO,GAAG,EAAE;KAChB,MAAM,IAAIF,IAAI,KAAK,GAAG,EAAE,C,CAExB,MAAM;MACLL,SAAS,CAACQ,IAAI,CAACH,IAAI,CAAC;;;EAIxB,OAAO,GAAG,GAAGL,SAAS,CAACS,IAAI,CAAC,GAAG,CAAC;AAClC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}