{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadBundleAsync = void 0;\nvar buildUrlForBundle_1 = require(\"./buildUrlForBundle\");\nvar fetchThenEval_1 = require(\"./fetchThenEval\");\nvar pendingRequests = 0;\nfunction loadBundleAsync(_x) {\n  return _loadBundleAsync.apply(this, arguments);\n}\nfunction _loadBundleAsync() {\n  _loadBundleAsync = _asyncToGenerator(function* (bundlePath) {\n    var requestUrl = (0, buildUrlForBundle_1.buildUrlForBundle)(bundlePath);\n    if (process.env.NODE_ENV === 'production') {\n      return (0, fetchThenEval_1.fetchThenEvalAsync)(requestUrl);\n    } else {\n      var Platform = require('react-native').Platform;\n      var LoadingView = require('../LoadingView').default;\n      if (Platform.OS !== 'web') {\n        LoadingView.showMessage('Downloading...', 'load');\n      }\n      pendingRequests++;\n      return (0, fetchThenEval_1.fetchThenEvalAsync)(requestUrl).then(function () {\n        var HMRClient = require('../HMRClient').default;\n        HMRClient.registerBundle(requestUrl);\n      }).finally(function () {\n        if (! --pendingRequests && Platform.OS !== 'web') {\n          LoadingView.hide();\n        }\n      });\n    }\n  });\n  return _loadBundleAsync.apply(this, arguments);\n}\nexports.loadBundleAsync = loadBundleAsync;","map":{"version":3,"names":["buildUrlForBundle_1","require","fetchThenEval_1","pendingRequests","loadBundleAsync","_x","_loadBundleAsync","apply","arguments","_asyncToGenerator","bundlePath","requestUrl","buildUrlForBundle","process","env","NODE_ENV","fetchThenEvalAsync","Platform","LoadingView","default","OS","showMessage","then","HMRClient","registerBundle","finally","hide","exports"],"sources":["/Users/josh/src/ui/apps/old-demo/node_modules/@expo/metro-runtime/src/async-require/loadBundle.ts"],"sourcesContent":["/**\n * Copyright Â© 2022 650 Industries.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { buildUrlForBundle } from './buildUrlForBundle';\nimport { fetchThenEvalAsync } from './fetchThenEval';\n\nlet pendingRequests = 0;\n\n/**\n * Load a bundle for a URL using fetch + eval on native and script tag injection on web.\n *\n * @param bundlePath Given a statement like `import('./Bacon')` `bundlePath` would be `Bacon.bundle?params=from-metro`.\n */\nexport async function loadBundleAsync(bundlePath: string): Promise<void> {\n  const requestUrl = buildUrlForBundle(bundlePath);\n\n  if (process.env.NODE_ENV === 'production') {\n    return fetchThenEvalAsync(requestUrl);\n  } else {\n    const Platform = require('react-native').Platform;\n    const LoadingView = require('../LoadingView')\n      .default as typeof import('../LoadingView').default;\n    if (Platform.OS !== 'web') {\n      // Send a signal to the `expo` package to show the loading indicator.\n      LoadingView.showMessage('Downloading...', 'load');\n    }\n    pendingRequests++;\n\n    return fetchThenEvalAsync(requestUrl)\n      .then(() => {\n        const HMRClient = require('../HMRClient').default as typeof import('../HMRClient').default;\n        HMRClient.registerBundle(requestUrl);\n      })\n      .finally(() => {\n        if (!--pendingRequests && Platform.OS !== 'web') {\n          LoadingView.hide();\n        }\n      });\n  }\n}\n"],"mappings":";;;;;;;AAMA,IAAAA,mBAAA,GAAAC,OAAA;AACA,IAAAC,eAAA,GAAAD,OAAA;AAEA,IAAIE,eAAe,GAAG,CAAC;AAAC,SAOFC,eAAeA,CAAAC,EAAA;EAAA,OAAAC,gBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,iBAAA;EAAAA,gBAAA,GAAAG,iBAAA,CAA9B,WAA+BC,UAAkB;IACtD,IAAMC,UAAU,GAAG,IAAAX,mBAAA,CAAAY,iBAAiB,EAACF,UAAU,CAAC;IAEhD,IAAIG,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;MACzC,OAAO,IAAAb,eAAA,CAAAc,kBAAkB,EAACL,UAAU,CAAC;KACtC,MAAM;MACL,IAAMM,QAAQ,GAAGhB,OAAO,CAAC,cAAc,CAAC,CAACgB,QAAQ;MACjD,IAAMC,WAAW,GAAGjB,OAAO,CAAC,gBAAgB,CAAC,CAC1CkB,OAAkD;MACrD,IAAIF,QAAQ,CAACG,EAAE,KAAK,KAAK,EAAE;QAEzBF,WAAW,CAACG,WAAW,CAAC,gBAAgB,EAAE,MAAM,CAAC;;MAEnDlB,eAAe,EAAE;MAEjB,OAAO,IAAAD,eAAA,CAAAc,kBAAkB,EAACL,UAAU,CAAC,CAClCW,IAAI,CAAC,YAAK;QACT,IAAMC,SAAS,GAAGtB,OAAO,CAAC,cAAc,CAAC,CAACkB,OAAgD;QAC1FI,SAAS,CAACC,cAAc,CAACb,UAAU,CAAC;MACtC,CAAC,CAAC,CACDc,OAAO,CAAC,YAAK;QACZ,IAAI,CAAC,GAAEtB,eAAe,IAAIc,QAAQ,CAACG,EAAE,KAAK,KAAK,EAAE;UAC/CF,WAAW,CAACQ,IAAI,EAAE;;MAEtB,CAAC,CAAC;;EAER,CAAC;EAAA,OAAApB,gBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AA1BDmB,OAAA,CAAAvB,eAAA,GAAAA,eAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}